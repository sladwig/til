print "START"

set error_handler_called false

proc e () {
    error "Test error"
}

proc on.error (x) {
    print "on.error:"
    print "  received: $x"
    print "  IGNORING IT!"
    set error_handler_called true
}

print "Calling procedure `e`..."
e
print "Procedure `e` was called."
assert ($error_handler_called == true)

print "END"
