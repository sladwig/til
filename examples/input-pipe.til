print "START"

proc printer () {
    print "printer started"
    sleep 1000
    read.no_wait | foreach line {
        print "> $line"
    }
    print "printer ended"
}

set p [spawn printer]
range 5 | foreach x {
    send $p $x
}

print "END"
